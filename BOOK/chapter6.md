# 第六章 Spark编程进阶

## 6.1 简介
<font color='red'>共享变量</font>: 一种可以在Spark任务中使用的特殊类型变量。主要两种：
1. 累加器
2. 广播变量。

## 6.2 累加器
Spark运算时可以使用驱动器程序中定义的变量，但是这些变量都是在程序启动时一次性复制到集群的每个任务中的。更新这些值并不会影响驱动器,或者其他任务中的对应变量。而共享变量则可以突破这个限制。 使用方法是:

```scala
val blankLines = sc.accumulator(0) # 定义一个累加器
file.flatMap(line =>{ if (...){
    blankLines += 1 # 累加器支持的操作
}
...
})
println(blankLines.value) # 在驱动器中输出累加器的值
```

> 工作节点的任务不能方位累加器的值。累加器对其只能写不能读。

### 6.2.1 累加器与容错性

> 行动操作中每个任务的累加器修改只会应用一次。但是转化操作就没有这样的保证。转化操作应用累加器只能在调试中使用。

### 6.2.2
可以使用更复杂的累加器`AccumulatorParam`。不过所进行的操作必须满足交换率和结合(**阿贝尔群**）。

## 6.3 广播变量


